<div class="conductor-form-overlay">
  <div class="conductor-form-container">
    <div class="modal-header">
      <h2>{{ isEditMode ? 'Editar Conductor' : 'Nuevo Conductor' }}</h2>
      <button type="button" class="close-button" aria-label="Cerrar" (click)="onCancel()">
        &times;
      </button>
    </div>
    
    <div class="modal-content">
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <div class="form-group">
            <label>
              Cédula:
              <input 
                formControlName="cedula" 
                type="text" 
                [class.error]="form.get('cedula')?.invalid && form.get('cedula')?.touched"
                placeholder="Ej: 12345678"
                maxlength="10">
            </label>
            <div *ngIf="form.get('cedula')?.invalid && form.get('cedula')?.touched" class="error-message">
              <span *ngIf="form.get('cedula')?.errors?.['required']">La cédula es requerida</span>
              <span *ngIf="form.get('cedula')?.errors?.['pattern']">Formato inválido (solo números, 7-10 dígitos)</span>
              <span *ngIf="form.get('cedula')?.errors?.['maxlength']">Máximo 10 dígitos</span>
            </div>
          </div>
          
          <div class="form-group">
            <label>
              Primer Nombre:
              <input 
                formControlName="primer_nombre" 
                type="text" 
                [class.error]="form.get('primer_nombre')?.invalid && form.get('primer_nombre')?.touched"
                placeholder="Ingrese el primer nombre"
                maxlength="50">
            </label>
            <div *ngIf="form.get('primer_nombre')?.invalid && form.get('primer_nombre')?.touched" class="error-message">
              <span *ngIf="form.get('primer_nombre')?.errors?.['required']">El primer nombre es requerido</span>
              <span *ngIf="form.get('primer_nombre')?.errors?.['pattern']">Solo se permiten letras</span>
              <span *ngIf="form.get('primer_nombre')?.errors?.['maxlength']">Máximo 50 caracteres</span>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>
              Segundo Nombre:
              <input 
                formControlName="segundo_nombre" 
                type="text" 
                [class.error]="form.get('segundo_nombre')?.invalid && form.get('segundo_nombre')?.touched"
                placeholder="Ingrese el segundo nombre (opcional)"
                maxlength="50">
            </label>
            <div *ngIf="form.get('segundo_nombre')?.invalid && form.get('segundo_nombre')?.touched" class="error-message">
              <span *ngIf="form.get('segundo_nombre')?.errors?.['pattern']">Solo se permiten letras</span>
              <span *ngIf="form.get('segundo_nombre')?.errors?.['maxlength']">Máximo 50 caracteres</span>
            </div>
          </div>
          
          <div class="form-group">
            <label>
              Apellidos:
              <input 
                formControlName="apellidos" 
                type="text" 
                [class.error]="form.get('apellidos')?.invalid && form.get('apellidos')?.touched"
                placeholder="Ingrese los apellidos"
                maxlength="100">
            </label>
            <div *ngIf="form.get('apellidos')?.invalid && form.get('apellidos')?.touched" class="error-message">
              <span *ngIf="form.get('apellidos')?.errors?.['required']">Los apellidos son requeridos</span>
              <span *ngIf="form.get('apellidos')?.errors?.['pattern']">Solo se permiten letras</span>
              <span *ngIf="form.get('apellidos')?.errors?.['maxlength']">Máximo 100 caracteres</span>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>
              Dirección:
              <input 
                formControlName="direccion" 
                type="text" 
                [class.error]="form.get('direccion')?.invalid && form.get('direccion')?.touched"
                placeholder="Ingrese la dirección completa"
                maxlength="200">
            </label>
            <div *ngIf="form.get('direccion')?.invalid && form.get('direccion')?.touched" class="error-message">
              <span *ngIf="form.get('direccion')?.errors?.['required']">La dirección es requerida</span>
              <span *ngIf="form.get('direccion')?.errors?.['maxlength']">Máximo 200 caracteres</span>
            </div>
          </div>
          
          <div class="form-group">
            <label>
              Teléfono:
              <input 
                formControlName="telefono" 
                type="text" 
                [class.error]="form.get('telefono')?.invalid && form.get('telefono')?.touched"
                placeholder="Ej: 3001234567"
                maxlength="15">
            </label>
            <div *ngIf="form.get('telefono')?.invalid && form.get('telefono')?.touched" class="error-message">
              <span *ngIf="form.get('telefono')?.errors?.['required']">El teléfono es requerido</span>
              <span *ngIf="form.get('telefono')?.errors?.['pattern']">Formato inválido (solo números, 7-15 dígitos)</span>
              <span *ngIf="form.get('telefono')?.errors?.['maxlength']">Máximo 15 dígitos</span>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>
              Ciudad:
              <input 
                formControlName="ciudad" 
                type="text" 
                [class.error]="form.get('ciudad')?.invalid && form.get('ciudad')?.touched"
                placeholder="Ingrese la ciudad"
                maxlength="50">
            </label>
            <div *ngIf="form.get('ciudad')?.invalid && form.get('ciudad')?.touched" class="error-message">
              <span *ngIf="form.get('ciudad')?.errors?.['required']">La ciudad es requerida</span>
              <span *ngIf="form.get('ciudad')?.errors?.['pattern']">Solo se permiten letras</span>
              <span *ngIf="form.get('ciudad')?.errors?.['maxlength']">Máximo 50 caracteres</span>
            </div>
          </div>
          
          <div class="form-group" *ngIf="isEditMode">
            <label>
              Estado:
              <select 
                formControlName="estado" 
                [class.error]="form.get('estado')?.invalid && form.get('estado')?.touched">
                <option value="activo">Activo</option>
                <option value="inactivo">Inactivo</option>
              </select>
            </label>
            <div *ngIf="form.get('estado')?.invalid && form.get('estado')?.touched" class="error-message">
              El estado es requerido
            </div>
          </div>
        </div>
        
        <div class="form-actions">
          <button type="button" (click)="onCancel()" [disabled]="loading">
            Cancelar
          </button>
          <button type="submit" [disabled]="loading || form.invalid">
            {{ loading ? 'Guardando...' : (isEditMode ? 'Actualizar' : 'Crear') }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
